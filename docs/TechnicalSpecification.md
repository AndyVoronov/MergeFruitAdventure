# Техническое задание (ТЗ) на разработку 2D-игры для браузера и мобильных устройств

**Название проекта:** Merge Fruit Adventure (рабочее название)  
**Тип проекта:** 2D-игра в жанре "merge" (слияние объектов) для браузера и мобильных устройств.  
**Целевая платформа:** Веб-браузеры (ПК), iOS, Android.  
**Референс:** [Merge Fruit](https://merge-fruit.com/).  
**Цель:** Создать увлекательную, визуально привлекательную и интуитивно понятную игру с сочной графикой, оптимизированную для кроссплатформенной работы, с акцентом на удержание пользователей и монетизацию.

---

## 1. Общее описание проекта
Игра представляет собой 2D-пазл в жанре "merge", где игрок сливает одинаковые фрукты для создания новых, более крупных объектов, зарабатывая очки и продвигаясь по уровням. Основной акцент — на простоте механики, ярком визуальном стиле и высокой вовлеченности. Игра должна быть оптимизирована для работы в браузерах (Chrome, Firefox, Safari, Edge) и на мобильных устройствах (iOS, Android) с учетом сенсорного управления и адаптивного интерфейса.

**Ключевые особенности:**
- Простая, но затягивающая механика слияния фруктов.
- Красочная 2D-графика с анимацией и эффектами.
- Кроссплатформенность (браузер + мобильные устройства).
- Монетизация через рекламу, встроенные покупки и бонусные предложения.
- Поддержка локализации для нескольких языков (EN, RU, ES, CN как минимум).
- Социальные функции: таблица лидеров, достижения, возможность делиться прогрессом.

---

## 2. Требования к игре

### 2.1. Геймплей
- **Основная механика:**
  - Игрок сбрасывает фрукты на игровое поле, где они могут сталкиваться и сливаться.
  - При слиянии двух одинаковых фруктов создается новый, более крупный фрукт (например, вишня → клубника → яблоко → арбуз и т.д.).
  - Цель: набрать максимальное количество очков, выполняя задания (например, создать определенное количество фруктов или достичь целевого уровня фрукта).
  - Поражение: игровое поле заполняется, и нет места для новых фруктов.
- **Уровни и прогрессия:**
  - Кампания с уровнями (100+ уровней с возрастающей сложностью).
  - Задания на каждом уровне (например, "Создай 3 арбуза" или "Набери 5000 очков").
  - Система звезд (1-3 звезды за уровень в зависимости от результатов).
  - Бесконечный режим для долгосрочной вовлеченности.
- **Бустеры и бонусы:**
  - Бустifers: удаление фрукта, перемешивание поля, автоматическое слияние.
  - Ежедневные бонусы за вход в игру.
  - Специальные события с уникальными наградами (например, тематические фрукты или скины).
- **Механика энергии:** ограниченное количество ходов или энергии с возможностью восстановления через просмотр рекламы или покупки.

### 2.2. Визуальный стиль
- **Графика:**
  - Стиль: 2D, мультяшный, яркий, с сочными цветами и плавными анимациями.
  - Фрукты: детализированные, с уникальным дизайном для каждого уровня (например, от маленькой вишни до огромного ананаса).
  - Фон: динамические фоны, меняющиеся в зависимости от уровня или темы (например, сад, тропики, ферма).
  - Эффекты: анимация слияния (вспышки, частицы), эффекты падения фруктов, визуальные отклики на действия игрока.
- **UI/UX:**
  - Адаптивный интерфейс для разных разрешений экрана (ПК, планшеты, смартфоны).
  - Минималистичный и интуитивный дизайн: крупные кнопки, понятные иконки.
  - Поддержка сенсорного управления (перетаскивание фруктов) и мыши (клик и перетаскивание).
  - Анимации переходов между экранами (плавные, без задержек).
- **Звук:**
  - Фоновая музыка: ненавязчивая, с возможностью отключения.
  - Звуковые эффекты: для слияния, падения фруктов, нажатий на кнопки, победы/поражения.
  - Голосовые подсказки (опционально, в зависимости от локализации).

### 2.3. Технические требования
- **Технологии:**
  - Движок: Phaser 3, PixiJS или Godot (с экспортом в HTML5).
  - Формат: HTML5 для браузеров, с возможностью упаковки в PWA (Progressive Web App) для мобильных устройств.
  - Backend: Node.js или Firebase для хранения данных пользователей, таблиц лидеров и аналитики.
- **Производительность:**
  - Оптимизация для 60 FPS на большинстве устройств (включая бюджетные смартфоны).
  - Минимальное время загрузки (не более 3-5 секунд).
  - Поддержка низкого энергопотребления на мобильных устройствах.
- **Кроссплатформенность:**
  - Адаптация под разные размеры экрана (от 320x480 до 2560x1440).
  - Поддержка управления: сенсорное (мобильные), мышь/клавиатура (ПК).
  - Тестирование на популярных браузерах (Chrome, Firefox, Safari, Edge) и устройствах (iOS 14+, Android 10+).
- **Локализация:**
  - Поддержка минимум 4 языков: английский, русский, испанский, китайский.
  - Легко расширяемая система для добавления новых языков.
- **Безопасность:**
  - Защита сохранений игрока (локально через LocalStorage и в облаке через авторизацию).
  - Защита от читов (например, валидация результатов на сервере).

### 2.4. Монетизация
- **Реклама:**
  - Баннерная реклама в нижней части экрана (опционально, отключаемая через покупку).
  - Наградная реклама за просмотр (дополнительные ходы, бустеры, монеты).
  - Межуровневые рекламные вставки (с возможностью пропуска за премиум-валюту).
- **Встроенные покупки:**
  - Покупка премиум-валюты (гемы/монеты) для бустеров, скинов или энергии.
  - Подписка: удаление рекламы, ежедневные бонусы, эксклюзивные скины.
  - Специальные предложения (например, стартовый набор для новичков).
- **Модель free-to-play:** основной контент бесплатный, с опциональными покупками для ускорения прогресса.

### 2.5. Социальные функции
- **Таблица лидеров:** глобальная и среди друзей.
- **Достижения:** система наград за выполнение заданий (например, "Слияние мастера" за 100 слияний).
- **Поделиться прогрессом:** возможность делиться результатами через соцсети или мессенджеры.
- **Авторизация:** через Google, Apple ID, или анонимный вход с сохранением прогресса.

---

## 3. Этапы разработки

### 3.1. Предпроизводство
- **Задачи:**
  - Разработка концепт-документа (GDD).
  - Создание прототипа основной механики (слияние фруктов).
  - Подготовка референсов для визуального стиля.
  - Утверждение стека технологий.
- **Результат:** Прототип игры, утвержденный GDD, план разработки.

### 3.2. Основная разработка
- **Задачи:**
  - Разработка игровой механики (слияние, уровни, бустеры).
  - Создание визуальных ассетов (фрукты, фоны, UI).
  - Реализация звукового сопровождения.
  - Интеграция backend (таблицы лидеров, сохранение прогресса).
  - Тестирование на разных устройствах и браузерах.
- **Результат:** Альфа-версия игры с базовым функционалом.

### 3.3. Тестирование и полировка
- **Задачи:**
  - Проведение внутреннего тестирования (QA).
  - Исправление багов и оптимизация производительности.
  - Балансировка уровней и экономики.
  - Добавление локализаций.
  - Проведение бета-тестирования с ограниченной аудиторией.
- **Результат:** Бета-версия, готовая к софт-лончу.

### 3.4. Софт-лонч и релиз
- **Задачи:**
  - Запуск игры в ограниченных регионах (например, Канада, Австралия).
  - Сбор аналитики и отзывов.
  - Финальная доработка на основе фидбэка.
  - Полный релиз на всех платформах.
- **Результат:** Полноценный релиз игры.

---

## 4. Команда разработки
- **Геймдизайнер:** проектирование механик, уровней, баланса экономики.
- **2D-художник:** создание графики (фрукты, фоны, UI).
- **Программист:** разработка игровой логики, интеграция с backend.
- **Звукорежиссер:** создание музыки и звуковых эффектов.
- **QA-инженер:** тестирование и контроль качества.
- **Маркетолог:** продвижение игры, работа с аналитикой.

---

## 5. Критерии приемки
- Игра стабильно работает на всех целевых платформах (браузеры, iOS, Android).
- Среднее время загрузки не превышает 5 секунд.
- FPS не падает ниже 60 на большинстве устройств.
- Положительный фидбэк от 80%+ пользователей на этапе бета-тестирования.
- Интеграция всех запланированных функций монетизации и социальных механик.
- Поддержка локализаций и адаптивного интерфейса.

---

## 6. Риски и меры по их устранению
- **Риск:** Низкая производительность на бюджетных устройствах.  
  **Решение:** Оптимизация графики, использование легковесных библиотек, тестирование на устройствах нижнего сегмента.
- **Риск:** Сложность в балансировке уровней.  
  **Решение:** Проведение итеративного тестирования с аналитикой поведения игроков.
- **Риск:** Негативный фидбэк на монетизацию.  
  **Решение:** Тестирование разных моделей монетизации на этапе софт-лонча, баланс между бесплатным и платным контентом.

---

## 7. Дополнительные пожелания
- **Инновации:** Рассмотреть возможность добавления уникальных механик, например, комбо-слияния или временные события с новыми фруктами.
- **Вовлеченность:** Реализовать ежедневные миссии и сезонные события для удержания аудитории.
- **Аналитика:** Интеграция аналитических инструментов (Google Analytics, Firebase) для отслеживания поведения игроков и оптимизации.

---

## 3. Текущее состояние реализации (2024-07-14)

- Игра реализована на Phaser 3 + TypeScript + PWA + i18next.
- Полностью адаптивная физика на Matter.js: фрукты катаются, сталкиваются, отскакивают, merge работает корректно.
- Поддержка SVG-ассетов: каждый фрукт — это контейнер (Phaser.GameObjects.Container), внутри которого Matter.Sprite (невидимый, для физики) и обычный Sprite с SVG-ассетом (для визуала). Это обеспечивает удобную замену и расширение ассетов без конвертации в PNG.
- Merge одинаковых фруктов реализован через обработку столкновений: при соприкосновении двух одинаковых контейнеров создаётся новый фрукт следующего уровня.
- Фрукты появляются по клику в нужной точке, корректно падают и взаимодействуют с платформой и стенами.
- Вся логика синхронизации визуала и физики реализована через события update.
- Исправлены все баги с исчезновением, невидимостью, некорректной физикой и merge.

---

## 4. Дальнейшие планы и задачи

- Реализация бустеров (удаление фрукта, перемешивание, автоматический merge).
- Добавление уровней и кампании (система заданий, прогрессия, звёзды).
- Визуальные эффекты: анимации merge, вспышки, частицы, улучшение UI.
- Интеграция backend (Node.js/Firebase): сохранение прогресса, лидерборды, аналитика.
- Расширение локализации (EN, RU, ES, CN и др.).
- Поддержка мобильных устройств (PWA, сенсорное управление).
- Покрытие тестами (юнит, интеграционные, кроссбраузерные).
- Документирование архитектуры и всех изменений.

---